<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <title>Appointment List - Eshi Blood</title>

    <!-- Bootstrap CSS CDN -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/css/bootstrap.min.css"
        integrity="sha384-9gVQ4dYFwwWSjIDZnLEWnxCjeSWFphJiwGPXr1jddIhOegiu1FwO5qRGvFXOdJZ4" crossorigin="anonymous">

    <!-- Custom CSS -->
    <link rel="stylesheet" href="./assets/css/styles.css">
    <link rel="stylesheet" href="./assets/css/event-admin.css">

    <!-- Font Awesome JS -->
    <script defer src="https://use.fontawesome.com/releases/v5.0.13/js/solid.js"
        integrity="sha384-tzzSw1/Vo+0N5UhStP3bvwWPq+uvzCMfrN1fEFe+xBmv1C/AtVX5K0uZtmcHitFZ" crossorigin="anonymous">
    </script>
    <script defer src="https://use.fontawesome.com/releases/v5.0.13/js/fontawesome.js"
        integrity="sha384-6OIrr52G08NpOFSZdxxz1xdNSndlD4vdcf/q2myIUVO0VsqaGHJsB0RaBE01VTOY" crossorigin="anonymous">
    </script>
    <link href="https://unpkg.com/bootstrap-table@1.18.2/dist/bootstrap-table.min.css" rel="stylesheet">
    <link rel="stylesheet" href="./assets/css/styles.css">
    <!-- <link rel="stylesheet" href="assets/css/request-admin.css"> -->

    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.10.23/css/jquery.dataTables.css">

    <script type="text/javascript" charset="utf8" src="https://cdn.datatables.net/1.10.23/js/jquery.dataTables.js">
    </script>
    </script>
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
        integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous">
    </script>

    <link rel="stylesheet" href="./assets/css/styles.css">
    <link rel="icon" href="./assets/images/eshi_logo.png">
    <link rel="stylesheet" href="assets/css/styles.css">
    <link rel="stylesheet" href="assets/css/appointment.css">


</head>

<body>

    <div class="wrapper">
        <!-- Sidebar Navigation-->
        <nav id="sidebar">
            <div class="sidebar-header">
                <h3><i class="fas fa-tint"></i> Eshi Blood</h3>
                <strong><i class="fas fa-tint"></i></strong>
            </div>

            <ul class="list-unstyled components">
                <li>
                    <a href="dashboard.html">
                        <i class="fas fa-chart-line"></i>
                        <span>&nbsp;Dashboard</span>
                    </a>
                </li>
                <li>
                    <a href="appointment-admin.html">
                        <i class="fas fa-calendar-check"></i>
                        <span>&nbsp;Appointment</span>
                    </a>
                </li>
                <li>
                    <a href="request-admin.html">
                        <i class="fas fa-image"></i>
                        <span>&nbsp;Make Request</span>
                    </a>
                </li>
                <li>
                    <a href="user.html">
                        <i class="fas fa-users"></i>
                        <span>&nbsp;Users</span>
                    </a>
                </li>
                <li>
                    <a href="event-admin.html">
                        <i class="fas fa-paper-plane"></i>
                        <span>&nbsp;Events</span>
                    </a>
                </li>
            </ul>
        </nav>

        <!-- Page Content  -->
        <div id="content">
            <div class="header" id="header">
                <nav class="navbar navbar-expand-lg" id="navbar">
                    <div class="container-fluid">
                        <button type="button" id="sidebarCollapse" class="btn btn-info ml-2">
                            <i class="fas fa-align-justify"></i>
                        </button>
                        <button class="btn btn-dark d-inline-block d-lg-none ml-auto" type="button"
                            data-toggle="collapse" data-target="#navbarSupportedContent"
                            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
                            <i class="fas fa-align-justify"></i>
                        </button>
                        <div class="collapse navbar-collapse" id="navbarSupportedContent">
                            <ul class="nav navbar-nav ml-auto">
                                <div class="pr-3">
                                    <div class="searchbar">
                                        <input class="search_input" type="text" name="" placeholder="Search...">
                                        <a href="#" class="search_icon"><i class="fas fa-search"></i></a>
                                    </div>
                                </div>
                                <li class="nav-item active">
                                    <a class="nav-link" href="#"><i class="fas fa-2x fa-bell"></i></a>
                                </li>
                                <li class="nav-item pl-3">
                                    <img src="./assets/images/avatar.png" alt="Avatar"
                                        class="avatar">&nbsp;&nbsp;<strong class="white-text">John Doe</strong>
                                </li>
                            </ul>
                        </div>
                    </div>
                </nav>
                <div class="row align-items-center py-4">
                    <div class="col-lg-6 col-7">
                        <h4 class="pl-5 white-text">Dashboard</h4>
                    </div>
                    <div class="col-lg-5 col-5 text-right">
                        <a href="" class="btn btn-sm btn-neutral">Filter</a>
                    </div>
                </div>
                <!-- Card Stats -->
                <div class="row mt-2 mr-4 ml-4">
                    <div class="col-lg-3 col-md-6">
                        <div class="card card-stats">
                            <div class="card-body">
                                <div class="row">
                                    <div class="col">
                                        <h5 class="card-title text-uppercase text-muted mb-0">Donations</h5>
                                        <span class="h2 font-weight-bold mb-0">100k</span>
                                    </div>
                                    <div class="col-auto">
                                        <div class="icon icon-shape bg-gradient-red text-white rounded-circle shadow">
                                            <i class="ni ni-active-40"></i>
                                        </div>
                                    </div>
                                </div>
                                <p class="mt-3 mb-0 text-sm">
                                    <span class="text-success mr-2">
                                        <i class="fa fa-arrow-up"></i> 3.48%
                                    </span>
                                    <span class="text-nowrap">Since last month</span>
                                </p>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-3 col-md-6">
                        <div class="card card-stats">
                            <div class="card-body">
                                <div class="row">
                                    <div class="col">
                                        <h5 class="card-title text-uppercase text-muted mb-0">Donations</h5>
                                        <span class="h2 font-weight-bold mb-0">100k</span>
                                    </div>
                                    <div class="col-auto">
                                        <div class="icon icon-shape bg-gradient-red text-white rounded-circle shadow">
                                            <i class="ni ni-active-40"></i>
                                        </div>
                                    </div>
                                </div>
                                <p class="mt-3 mb-0 text-sm">
                                    <span class="text-success mr-2">
                                        <i class="fa fa-arrow-up"></i> 3.48%
                                    </span>
                                    <span class="text-nowrap">Since last month</span>
                                </p>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-3 col-md-6">
                        <div class="card card-stats">
                            <div class="card-body">
                                <div class="row">
                                    <div class="col">
                                        <h5 class="card-title text-uppercase text-muted mb-0">Donations</h5>
                                        <span class="h2 font-weight-bold mb-0">100k</span>
                                    </div>
                                    <div class="col-auto">
                                        <div class="icon icon-shape bg-gradient-red text-white rounded-circle shadow">
                                            <i class="ni ni-active-40"></i>
                                        </div>
                                    </div>
                                </div>
                                <p class="mt-3 mb-0 text-sm">
                                    <span class="text-success mr-2">
                                        <i class="fa fa-arrow-up"></i> 3.48%
                                    </span>
                                    <span class="text-nowrap">Since last month</span>
                                </p>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-3 col-md-6">
                        <div class="card card-stats">
                            <div class="card-body">
                                <div class="row">
                                    <div class="col">
                                        <h5 class="card-title text-uppercase text-muted mb-0">Donations</h5>
                                        <span class="h2 font-weight-bold mb-0">100k</span>
                                    </div>
                                    <div class="col-auto">
                                        <div class="icon icon-shape bg-gradient-red text-white rounded-circle shadow">
                                            <i class="ni ni-active-40"></i>
                                        </div>
                                    </div>
                                </div>
                                <p class="mt-3 mb-0 text-sm">
                                    <span class="text-success mr-2">
                                        <i class="fa fa-arrow-up"></i> 3.48%
                                    </span>
                                    <span class="text-nowrap">Since last month</span>
                                </p>
                            </div>
                        </div>
                    </div>

                </div>



                <div id="viewAppointments" style="margin-top: 200px;margin-left: 100px;">


                    <script>
                        let dataSet = [
                            // userId Date time status action
                            ["appid123", "uid123", "3/4/21", "3:45", "pending", ""],
                            ["appid123", "uid123", "3/4/21", "3:45", "pending", ""],
                            ["appid123", "uid123", "3/4/21", "3:45", "pending", ""],
                            ["appid123", "uid123", "3/4/21", "3:45", "pending", ""],
                            ["appid123", "uid123", "3/4/21", "3:45", "pending", ""],
                            ["appid123", "uid123", "3/4/21", "3:45", "pending", ""],
                            ["appid123", "uid123", "3/4/21", "3:45", "pending", ""],
                            ["appid123", "uid123", "3/4/21", "3:45", "pending", ""],
                            ["appid123", "uid123", "3/4/21", "3:45", "pending", ""],
                            ["appid123", "uid123", "3/4/21", "3:45", "pending", ""],
                            ["appid123", "uid123", "3/4/21", "3:45", "pending", ""],
                            ["appid123", "uid123", "3/4/21", "3:45", "pending", ""],
                            ["appid123", "uid123", "3/4/21", "3:45", "pending", ""],
                            ["appid123", "uid123", "3/4/21", "3:45", "pending", ""],
                            ["appid123", "uid123", "3/4/21", "3:45", "pending", ""],
                            ["appid123", "uid123", "3/4/21", "3:45", "pending", ""],
                        ]

                        function reject(e) {
                            // traverse to the eventid element in the dom
                            let appointmentId = e.target.parentElement.parentElement.parentElement.children[0].innerText
                            // let userId = e.target.parentElement.parentElement.parentElement.children[1].innerText
                            console.log(appointmentId)
                        }

                        function accept(e) {
                            // traverse to the eventid element in the dom
                            let appointmentId = e.target.parentElement.parentElement.parentElement.children[0].innerText
                            // let userId = e.target.parentElement.parentElement.parentElement.children[1].innerText
                            console.log(appointmentId)
                        }
                        // possible issue we should be rebuilding the ui when one of the action buttons are clicked


                        $(document).ready(function () {
                            $('#example').DataTable({
                                data: dataSet,
                                columns: [{
                                        title: "appointment id"
                                    },
                                    {
                                        title: "userId"
                                    },
                                    {
                                        title: "date"
                                    },
                                    {
                                        title: "time"
                                    },
                                    {
                                        title: "status"
                                    },
                                    // { title: "location" },
                                    {
                                        title: "Action",
                                        "mRender": function (data, type, row) {
                                            // return `<button >${data}</button>`; 
                                            // TODO   fas fa-edit
                                            return `<a onClick="accept(event)" class="Accept"  title="Accept">
                                                                        <i class="fa fa-check"></i>
                                                                    </a> &nbsp&nbsp&nbsp&nbsp
                                                                    <a onClick="reject(event)"  class="Reject"  title="Reject">
                                                                        <i class="fa fa-times"></i>
                                                                    </a>
                                                                     `
                                        }
                                    }
                                ]
                            });
                        });
                    </script>
                    <!-- TODO ********************************************** -->

                    <!-- <style>
                                table{
                                    margin: 0 auto;
                                    width: 150%;
                                    clear: both;
                                    border-collapse: collapse;
                                    table-layout: fixed; 
                                    word-wrap:break-word; 
                                    }
                            </style> -->
                    <table id="example" class="display" style="width: 100%;"></table>

                </div>


            </div>
        </div>
    </div>


    <!-- jQuery CDN - Slim version (=without AJAX) -->
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
        integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous">
    </script>
    <!-- Popper.JS -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js"
        integrity="sha384-cs/chFZiN24E4KMATLdqdvsezGxaGsi4hLGOzlXwp5UZB1LY//20VyM2taTB4QvJ" crossorigin="anonymous">
    </script>
    <!-- Bootstrap JS -->
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js"
        integrity="sha384-uefMccjFJAIv6A+rW+L4AHf99KvxDjWSu1z9VI8SKNVmz4sk7buKt/6v9KI65qnm" crossorigin="anonymous">
    </script>

    <script type="text/javascript">
        $(document).ready(function () {
            $('#sidebarCollapse').on('click', function () {
                $('#sidebar').toggleClass('active');
            });
        });
    </script>
    <!-- jQuery CDN - Slim version (=without AJAX) -->
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
        integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous">
    </script>
    <script src="https://code.jquery.com/jquery-3.5.1.js"></script>
    <script src="https://cdn.datatables.net/1.10.23/js/jquery.dataTables.min.js"></script>
    <!-- Popper.JS -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js"
        integrity="sha384-cs/chFZiN24E4KMATLdqdvsezGxaGsi4hLGOzlXwp5UZB1LY//20VyM2taTB4QvJ" crossorigin="anonymous">
    </script>
    <!-- Bootstrap JS -->
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js"
        integrity="sha384-uefMccjFJAIv6A+rW+L4AHf99KvxDjWSu1z9VI8SKNVmz4sk7buKt/6v9KI65qnm" crossorigin="anonymous">
    </script>
    <script>
        const sidebar = document.getElementById('sidebar')
        const content = document.getElementById('content')
        const header = document.getElementById('header')
        const navBar = document.getElementById('navbar')
        document.getElementById('sidebarCollapse').addEventListener('click', () => {
            if (!sidebar.classList.contains('active')) {
                sidebar.style.left = '0px'
                content.classList.add('changeOpacityBackground');
                header.classList.add('changeOpacityBackground');
                navBar.classList.add('changeOpacityBackground');
            } else {
                sidebar.style.left = '-250px'
            }
        });

        content.addEventListener('mouseup', () => {
            if (!sidebar.classList.contains('active')) {

            } else {
                sidebar.style.left = '-250px'
                sidebar.classList.remove('active');
                content.classList.remove('changeOpacityBackground');
                header.classList.remove('changeOpacityBackground');
                navBar.classList.remove('changeOpacityBackground');
            }
        })
    </script>

</body>

</html>